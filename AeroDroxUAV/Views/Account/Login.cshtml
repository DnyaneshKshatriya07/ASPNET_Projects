@{
    ViewData["Title"] = "Login";
}

<style>
    .login-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        display: flex;
        align-items: center;
        padding: 40px 0;
        position: relative;
        overflow: hidden;
    }
    
    .login-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        animation: slideInRight 0.8s ease-out;
    }
    
    .login-header {
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        padding: 40px 20px;
        text-align: center;
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .login-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="white" stroke-width="1" stroke-opacity="0.1"/></svg>');
        opacity: 0.1;
    }
    
    .drone-login {
        font-size: 4rem;
        margin-bottom: 20px;
        animation: droneHover 3s ease-in-out infinite;
    }
    
    .form-control-login {
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        padding: 12px 15px;
        transition: all 0.3s ease;
        position: relative;
        background: rgba(255, 255, 255, 0.9);
    }
    
    .form-control-login:focus {
        border-color: #26d0ce;
        box-shadow: 0 0 0 3px rgba(38, 208, 206, 0.1);
        transform: translateY(-2px);
        background: white;
    }
    
    .btn-login {
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        border: none;
        padding: 12px 30px;
        border-radius: 10px;
        color: white;
        font-weight: 600;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        width: 100%;
    }
    
    .btn-login::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 5px;
        background: rgba(255, 255, 255, 0.5);
        opacity: 0;
        border-radius: 100%;
        transform: scale(1, 1) translate(-50%);
        transform-origin: 50% 50%;
    }
    
    .btn-login:focus:not(:active)::after {
        animation: ripple 1s ease-out;
    }
    
    .btn-login:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(38, 208, 206, 0.4);
    }
    
    .floating-drones {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
    }
    
    .floating-drone {
        position: absolute;
        font-size: 1.5rem;
        color: rgba(255, 255, 255, 0.3);
        animation: floatAround 20s infinite linear;
    }
    
    .security-indicator {
        height: 3px;
        background: linear-gradient(90deg, #dc3545, #ffc107, #28a745);
        border-radius: 2px;
        margin-top: 5px;
        position: relative;
    }
    
    .security-level {
        position: absolute;
        top: -25px;
        font-size: 0.8rem;
        color: #666;
    }
    
    .pulse-ring {
        position: absolute;
        width: 10px;
        height: 10px;
        border: 2px solid #28a745;
        border-radius: 50%;
        animation: pulseRing 2s infinite;
        top: 50%;
        right: 15px;
        transform: translateY(-50%);
    }
    
    .forgot-password {
        position: relative;
        overflow: hidden;
    }
    
    .forgot-password::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: -100%;
        width: 100%;
        height: 1px;
        background: linear-gradient(90deg, transparent, #26d0ce, transparent);
        transition: left 0.5s ease;
    }
    
    .forgot-password:hover::after {
        left: 100%;
    }
    
    .quick-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
    }
    
    .quick-link {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: all 0.3s ease;
    }
    
    .quick-link:hover {
        transform: translateY(-5px) scale(1.1);
        box-shadow: 0 10px 20px rgba(38, 208, 206, 0.3);
    }
</style>

<style>
    @@keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(50px) scale(0.9);
        }
        to {
            opacity: 1;
            transform: translateX(0) scale(1);
        }
    }
    
    @@keyframes droneHover {
        0%, 100% {
            transform: translateY(0) rotate(0deg);
        }
        50% {
            transform: translateY(-10px) rotate(5deg);
        }
    }
    
    @@keyframes floatAround {
        0% {
            transform: translate(0, 0) rotate(0deg);
        }
        25% {
            transform: translate(100px, 50px) rotate(90deg);
        }
        50% {
            transform: translate(50px, 100px) rotate(180deg);
        }
        75% {
            transform: translate(-50px, 50px) rotate(270deg);
        }
        100% {
            transform: translate(0, 0) rotate(360deg);
        }
    }
    
    @@keyframes ripple {
        0% {
            transform: scale(0, 0);
            opacity: 1;
        }
        20% {
            transform: scale(25, 25);
            opacity: 1;
        }
        100% {
            opacity: 0;
            transform: scale(40, 40);
        }
    }
    
    @@keyframes pulseRing {
        0% {
            transform: translateY(-50%) scale(0.5);
            opacity: 0;
        }
        50% {
            opacity: 1;
        }
        100% {
            transform: translateY(-50%) scale(2);
            opacity: 0;
        }
    }
    
    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<div class="login-container">
    <div class="floating-drones" id="floatingDrones"></div>
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5">
                <div class="login-card">
                    <!-- Header with Drone Animation -->
                    <div class="login-header">
                        <i class="fas fa-drone drone-login"></i>
                        <h3 class="mb-2">AeroDrox UAV</h3>
                        <p class="mb-0 opacity-75">Secure Fleet Access</p>
                    </div>
                    
                    <!-- Login Form -->
                    <div class="p-4">
                        <form method="post" asp-controller="Account" asp-action="Login" id="loginForm">
                            <!-- Email/Mobile Input -->
                            <div class="mb-4">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-user-circle me-2"></i>Access ID
                                </label>
                                <div class="position-relative">
                                    <input type="text" name="LoginId" class="form-control form-control-login" 
                                           placeholder="Email or Mobile Number" required>
                                    <div class="pulse-ring"></div>
                                </div>
                                <small class="text-muted">Use your registered email or mobile number</small>
                            </div>
                            
                            <!-- Password Input -->
                            <div class="mb-4">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-key me-2"></i>Security Key
                                </label>
                                <input type="password" name="Password" class="form-control form-control-login" 
                                       id="loginPassword" placeholder="Enter your password" required>
                                
                                <!-- Security Indicator -->
                                <div class="security-indicator">
                                    <div class="security-level">Security Level</div>
                                </div>
                                
                                <!-- Show Password Toggle -->
                                <div class="form-check mt-2">
                                    <input class="form-check-input" type="checkbox" id="showLoginPassword">
                                    <label class="form-check-label" for="showLoginPassword">
                                        Show Password
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Forgot Password -->
                            <div class="mb-4 text-end">
                                <a href="#" class="text-primary text-decoration-none forgot-password">
                                    <i class="fas fa-unlock-alt me-1"></i>Forgot Password?
                                </a>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="d-grid mb-4">
                                <button type="submit" class="btn btn-login">
                                    <i class="fas fa-fingerprint me-2"></i>Authenticate & Launch
                                </button>
                            </div>
                            
                            <!-- Register Link -->
                            <div class="text-center">
                                <p class="text-muted mb-3">
                                    New to AeroDrox UAV? 
                                    <a asp-action="Register" class="text-primary fw-bold text-decoration-none">
                                        <i class="fas fa-user-plus me-1"></i>Create Account
                                    </a>
                                </p>
                            </div>
                        </form>
                        
                        <!-- Quick Links -->
                        <div class="quick-links">
                            <a href="#" class="quick-link" title="Support">
                                <i class="fas fa-headset"></i>
                            </a>
                            <a href="#" class="quick-link" title="Documentation">
                                <i class="fas fa-book"></i>
                            </a>
                            <a href="#" class="quick-link" title="Training">
                                <i class="fas fa-graduation-cap"></i>
                            </a>
                        </div>
                        
                        @if(ViewBag.Error != null)
                        {
                            <div class="alert alert-danger mt-4 animate__animated animate__shakeX" role="alert">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>Access Denied:</strong> @ViewBag.Error
                            </div>
                        }
                        
                        @if(TempData["Success"] != null)
                        {
                            <div class="alert alert-success mt-4 animate__animated animate__fadeIn" role="alert">
                                <i class="fas fa-check-circle me-2"></i>
                                <strong>Success:</strong> @TempData["Success"]
                            </div>
                        }
                    </div>
                </div>
                
                <!-- Security Badge -->
                <div class="text-center mt-4">
                    <div class="d-inline-flex align-items-center bg-white p-3 rounded-pill shadow-sm">
                        <i class="fas fa-shield-alt text-success me-2 animate__animated animate__pulse animate__infinite"></i>
                        <span class="text-muted">256-bit SSL Encryption</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Create floating drones
            function createFloatingDrones() {
                const container = $('#floatingDrones');
                for (let i = 0; i < 8; i++) {
                    const drone = $('<i class="fas fa-drone floating-drone"></i>');
                    drone.css({
                        left: Math.random() * 100 + '%',
                        top: Math.random() * 100 + '%',
                        animationDelay: Math.random() * 20 + 's',
                        animationDuration: Math.random() * 30 + 20 + 's'
                    });
                    container.append(drone);
                }
            }
            
            createFloatingDrones();
            
            // Show/Hide password
            $('#showLoginPassword').change(function() {
                const passwordInput = $('#loginPassword');
                if ($(this).is(':checked')) {
                    passwordInput.attr('type', 'text');
                } else {
                    passwordInput.attr('type', 'password');
                }
            });
            
            // Security level indicator
            $('#loginPassword').on('input', function() {
                const password = $(this).val();
                const indicator = $('.security-indicator');
                
                if (password.length === 0) {
                    indicator.css('background', '#e0e0e0');
                    $('.security-level').text('Enter password').css('color', '#666');
                } else if (password.length < 6) {
                    indicator.css('background', 'linear-gradient(90deg, #dc3545, #dc3545)');
                    $('.security-level').text('Weak').css('color', '#dc3545');
                } else if (password.length < 8) {
                    indicator.css('background', 'linear-gradient(90deg, #dc3545 50%, #ffc107 50%)');
                    $('.security-level').text('Moderate').css('color', '#ffc107');
                } else {
                    indicator.css('background', 'linear-gradient(90deg, #dc3545 33%, #ffc107 33%, #ffc107 66%, #28a745 66%)');
                    $('.security-level').text('Strong').css('color', '#28a745');
                }
            });
            
            // Auto-focus on first input
            setTimeout(() => {
                $('input[name="LoginId"]').focus();
            }, 500);
            
            // Form submission with animations
            $('#loginForm').submit(function(e) {
                e.preventDefault();
                
                const loginId = $('input[name="LoginId"]').val().trim();
                const password = $('input[name="Password"]').val().trim();
                
                if (!loginId || !password) {
                    // Shake empty fields
                    $('input').each(function() {
                        if (!$(this).val().trim()) {
                            $(this).addClass('animate__animated animate__shakeX');
                            setTimeout(() => {
                                $(this).removeClass('animate__animated animate__shakeX');
                            }, 500);
                        }
                    });
                    
                    // Play error sound
                    const errorSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-warning-alarm-675.mp3');
                    errorSound.volume = 0.1;
                    errorSound.play();
                    
                    return false;
                }
                
                // Show loading animation
                const btn = $(this).find('button[type="submit"]');
                const originalHtml = btn.html();
                btn.html('<i class="fas fa-spinner fa-spin me-2"></i>Authenticating...').prop('disabled', true);
                
                // Animate drone
                $('.drone-login').addClass('animate__animated animate__bounceOutUp');
                
                // Add authentication animation
                $('.login-header').css({
                    background: 'linear-gradient(135deg, #155724 0%, #28a745 100%)'
                });
                
                // Play success sound
                const successSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3');
                successSound.volume = 0.1;
                successSound.play();
                
                // Submit after animation
                setTimeout(() => {
                    this.submit();
                }, 1500);
                
                return true;
            });
            
            // Add ripple effect to quick links
            $('.quick-link').on('click', function(e) {
                e.preventDefault();
                
                const $this = $(this);
                const x = e.pageX - $this.offset().left;
                const y = e.pageY - $this.offset().top;
                
                const ripple = $('<span class="ripple"></span>').css({
                    left: x,
                    top: y,
                    width: '5px',
                    height: '5px',
                    background: 'rgba(255,255,255,0.5)'
                });
                
                $this.append(ripple);
                setTimeout(() => ripple.remove(), 1000);
                
                // Show tooltip
                const title = $this.attr('title');
                alert(`Opening ${title}...`);
            });
            
            // Add hover effect to form controls
            $('.form-control-login').on('mouseenter', function() {
                $(this).css('transform', 'translateY(-2px)');
            }).on('mouseleave', function() {
                if (!$(this).is(':focus')) {
                    $(this).css('transform', 'translateY(0)');
                }
            });
        });
    </script>
}