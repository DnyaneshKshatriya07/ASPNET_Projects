@model IEnumerable<AeroDroxUAV.Models.DroneServices>
@* RZ2005 & RZ2001 FIX: Ensure the @model line is the very first line. *@

<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle text-white d-flex align-items-center gap-1" href="#" id="navbarDropdownServices" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-gear-fill" style="font-size: 0.9rem;"></i>
        <span class="fw-medium" style="font-size: 0.9rem;">Drone Services</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-dark border-0 shadow-lg" aria-labelledby="navbarDropdownServices" style="min-width: 220px; font-size: 0.85rem;">
        <!-- Dropdown Header -->
        <li class="dropdown-header text-primary bg-dark px-2 py-1 border-bottom border-secondary">
            <div class="d-flex align-items-center gap-1">
                <i class="bi bi-list-check"></i>
                <span class="fw-bold" style="font-size: 0.85rem;">Professional Services</span>
            </div>
        </li>
        
        @if (Model != null && Model.Any())
        {
            <!-- Services List -->
            @foreach (var service in Model)
            {
                if (service != null) 
                {
                    <li>
                        <a class="dropdown-item d-flex align-items-center gap-2 py-2 px-3 text-white hover-item" 
                           asp-controller="DroneServices" 
                           asp-action="Details" 
                           asp-route-id="@service.Id">
                            <div class="icon-wrapper bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 28px; height: 28px; font-size: 0.8rem;">
                                <i class="bi bi-check-circle"></i>
                            </div>
                            <div class="d-flex flex-column">
                                <span class="fw-medium" style="font-size: 0.85rem;">@service.Name</span>
                                <small class="text-muted" style="font-size: 0.75rem;">@service.Category</small>
                            </div>
                        </a>
                    </li>
                }
            }
            
            <!-- Separator -->
            <li class="my-1">
                <div class="border-bottom border-secondary mx-2"></div>
            </li>
            
            <!-- View All Services -->
            <li>
                <a class="dropdown-item d-flex align-items-center gap-2 py-2 px-3 bg-primary-gradient text-white fw-bold" 
                   asp-controller="DroneServices" 
                   asp-action="Index" style="font-size: 0.85rem;">
                    <div class="icon-wrapper bg-white rounded-circle d-flex align-items-center justify-content-center" style="width: 28px; height: 28px;">
                        <i class="bi bi-grid-3x3-gap-fill text-primary" style="font-size: 0.8rem;"></i>
                    </div>
                    <span>View All Services</span>
                </a>
            </li>
        }
        else
        {
            <!-- No Services Available -->
            <li>
                <div class="dropdown-item d-flex align-items-center gap-2 py-3 px-3 text-center">
                    <div class="icon-wrapper bg-secondary rounded-circle d-flex align-items-center justify-content-center mx-auto" style="width: 36px; height: 36px;">
                        <i class="bi bi-inbox" style="font-size: 0.9rem;"></i>
                    </div>
                    <div class="w-100">
                        <span class="fw-medium text-white d-block" style="font-size: 0.85rem;">No Services</span>
                        <small class="text-muted" style="font-size: 0.75rem;">Check back soon</small>
                    </div>
                </div>
            </li>
            
            <!-- View Services Page Anyway -->
            <li>
                <div class="border-bottom border-secondary mx-2 my-1"></div>
                <a class="dropdown-item d-flex align-items-center gap-2 py-2 px-3 text-white" 
                   asp-controller="DroneServices" 
                   asp-action="Index" style="font-size: 0.85rem;">
                    <i class="bi bi-eye-fill"></i>
                    <span>Visit Services Page</span>
                </a>
            </li>
        }
        
        <!-- Footer -->
        <li class="dropdown-footer bg-dark px-2 py-1 border-top border-secondary">
            <small class="text-muted" style="font-size: 0.75rem;">Expert drone solutions</small>
        </li>
    </ul>
</li>

<style>
    .dropdown-menu-dark {
        background: linear-gradient(145deg, #1a1a1a, #2d2d2d);
        border: 1px solid #444;
    }
    
    .dropdown-header {
        background: rgba(13, 110, 253, 0.1) !important;
        border-bottom: 1px solid rgba(13, 110, 253, 0.3) !important;
    }
    
    .hover-item {
        transition: all 0.2s ease;
        background: transparent;
    }
    
    .hover-item:hover {
        background: rgba(13, 110, 253, 0.15) !important;
        transform: translateX(3px);
        border-left: 2px solid #0d6efd;
    }
    
    .icon-wrapper {
        transition: all 0.3s ease;
    }
    
    .hover-item:hover .icon-wrapper {
        transform: scale(1.05);
        box-shadow: 0 2px 5px rgba(13, 110, 253, 0.3);
    }
    
    .bg-primary-gradient {
        background: linear-gradient(45deg, #0d6efd, #0b5ed7);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .bg-primary-gradient:hover {
        background: linear-gradient(45deg, #0b5ed7, #0a58ca);
        transform: translateY(-1px);
        box-shadow: 0 3px 8px rgba(13, 110, 253, 0.4);
    }
    
    .dropdown-footer {
        background: rgba(0, 0, 0, 0.2) !important;
    }
    
    .shadow-lg {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5) !important;
    }
</style>